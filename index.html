<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Controle de Grana</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>

  <!-- LOCK SCREEN -->
  <div id="lockScreen" class="lock hidden">
    <div class="lockCard">
      <h2>üîí Protegido por PIN</h2>
      <p>Digite seu PIN para acessar.</p>
      <div class="lockRow">
        <input id="pinInput" type="password" inputmode="numeric" placeholder="PIN" />
        <button id="btnUnlock" class="btn ok">Entrar</button>
      </div>
      <small class="muted">Obs: √© prote√ß√£o local (n√£o √© ‚Äúbanco‚Äù).</small>
    </div>
  </div>

  <header class="wrap">
    <div class="title">
      <h1>Controle de Grana</h1>
      <p>Renda ‚Ä¢ Contas ‚Ä¢ Aportes ‚Ä¢ D√≠vida ‚Ä¢ Reserva ‚Ä¢ Metas ‚Ä¢ Gr√°ficos (salva no navegador)</p>
    </div>

    <div class="actions">
      <button id="btnExport" class="btn ghost">Exportar JSON</button>
      <label class="btn ghost file">
        Importar JSON
        <input id="fileImport" type="file" accept="application/json" />
      </label>
      <button id="btnReset" class="btn danger">Zerar dados</button>
    </div>
  </header>

<main class="wrap">
  <!-- NAV TABS -->
  <nav class="tabs" id="tabs">
    <button class="tab active" data-tab="dash">Dashboard</button>
    <button class="tab" data-tab="income">Rendas</button>
    <button class="tab" data-tab="costs">Gastos</button>
    <button class="tab" data-tab="debts">D√≠vidas</button>
    <button class="tab" data-tab="reserve">Reserva</button>
    <button class="tab" data-tab="history">Hist√≥rico</button>
    <button class="tab" data-tab="settings">Config</button>
  </nav>

  <!-- DASHBOARD -->
  <section class="page active" id="page-dash">
    <div class="grid">
      <section class="card">
        <h2>Resumo</h2>
        <!-- mant√©m os mesmos IDs do resumo -->
        <div class="stats">
          <div class="stat"><span>Renda total</span><strong id="sumIncome">R$ 0,00</strong></div>
          <div class="stat"><span>Gastos fixos</span><strong id="sumFixed">R$ 0,00</strong></div>
          <div class="stat"><span>Aportes (d√≠vida + reserva)</span><strong id="sumAports">R$ 0,00</strong></div>
          <div class="stat"><span>Sobra do m√™s</span><strong id="sumLeft" class="good">R$ 0,00</strong></div>
        </div>

        <hr />

        <div class="stats">
          <div class="stat"><span>D√≠vida restante (estim.)</span><strong id="sumDebtAfter">R$ 0,00</strong></div>
          <div class="stat"><span>Meses p/ quitar (estim.)</span><strong id="sumMonths">‚Äî</strong></div>
          <div class="stat"><span>Reserva ap√≥s aporte</span><strong id="sumReserveAfter">R$ 0,00</strong></div>
          <div class="stat"><span>Meta reserva (auto)</span><strong id="sumReserveGoal">R$ 0,00</strong></div>
        </div>

        <div class="barWrap">
          <div class="barLabel">
            <span>Aloca√ß√£o do m√™s</span>
            <span id="sumPerc">‚Äî</span>
          </div>
          <div class="bar">
            <div id="barFixed" class="seg fixed"></div>
            <div id="barDebt" class="seg debt"></div>
            <div id="barReserve" class="seg reserve"></div>
            <div id="barLeft" class="seg left"></div>
          </div>
          <div class="legend">
            <span><i class="dot fixed"></i> Fixos</span>
            <span><i class="dot debt"></i> D√≠vida</span>
            <span><i class="dot reserve"></i> Reserva</span>
            <span><i class="dot left"></i> Sobra</span>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Gr√°ficos r√°pidos</h2>
        <div class="chartBox">
          <h3 class="sub">D√≠vida x Reserva</h3>
          <canvas id="chartHistory" width="520" height="260"></canvas>
        </div>
        <div class="chartBox">
          <h3 class="sub">Distribui√ß√£o do m√™s</h3>
          <canvas id="chartAlloc" width="520" height="260"></canvas>
        </div>
      </section>
    </div>
  </section>

  <!-- RENDAS -->
  <section class="page" id="page-income">
    <div class="grid">
      <section class="card full">
        <h2>Rendas</h2>

        <div class="grid2">
          <div class="field">
            <label>Modo Uber</label>
            <select id="uberMode">
              <option value="manual">Manual (digitar renda mensal)</option>
              <option value="auto">Autom√°tico (di√°ria + b√¥nus + dias)</option>
              <option value="weekly">Semanal (por semana)</option>
            </select>
          </div>

          <div class="field">
            <label>Dias no m√™s</label>
            <select id="workDays">
              <option value="30">30 dias</option>
              <option value="25">25 dias</option>
            </select>
          </div>
        </div>

        <div id="uberAutoBox" class="subbox hidden">
          <h3 class="sub">Uber autom√°tico</h3>
          <div class="grid2">
            <div class="field">
              <label>Di√°ria (R$)</label>
              <input id="uberDaily" type="number" min="0" step="0.01" />
            </div>
            <div class="field">
              <label>B√¥nus (%)</label>
              <input id="uberBonusPct" type="number" min="0" step="0.01" />
            </div>
          </div>
        </div>

        <div id="uberWeeklyBox" class="subbox hidden">
          <h3 class="sub">Uber semanal</h3>
          <div class="tableWrap">
            <table>
              <thead><tr><th>Semana</th><th>Entrou (R$)</th></tr></thead>
              <tbody>
                <tr><td>Semana 1</td><td><input id="w1" class="tableInput" type="number" min="0" step="0.01"/></td></tr>
                <tr><td>Semana 2</td><td><input id="w2" class="tableInput" type="number" min="0" step="0.01"/></td></tr>
                <tr><td>Semana 3</td><td><input id="w3" class="tableInput" type="number" min="0" step="0.01"/></td></tr>
                <tr><td>Semana 4</td><td><input id="w4" class="tableInput" type="number" min="0" step="0.01"/></td></tr>
                <tr><td>Semana 5</td><td><input id="w5" class="tableInput" type="number" min="0" step="0.01"/></td></tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="grid2">
          <div class="field">
            <label>Sua renda (Uber) ‚Äî manual ou calculada</label>
            <input id="incomeYou" type="number" min="0" step="0.01" />
          </div>
          <div class="field">
            <label>Renda da esposa</label>
            <input id="incomeWife" type="number" min="0" step="0.01" />
          </div>
          <div class="field">
            <label>Extras (por fora)</label>
            <input id="incomeExtra" type="number" min="0" step="0.01" />
          </div>
        </div>

        <div class="row">
          <button id="btnSave" class="btn">Salvar</button>
        </div>
      </section>
    </div>
  </section>

  <!-- GASTOS -->
  <section class="page" id="page-costs">
    <div class="grid">
      <section class="card full">
        <h2>Gastos</h2>
        <div class="grid2">
          <div class="field">
            <label>Contas fixas (total)</label>
            <input id="fixedCosts" type="number" min="0" step="0.01" />
          </div>
          <!-- Se quiser, depois eu adiciono ‚Äúgastos vari√°veis‚Äù por categoria -->
        </div>
        <div class="row">
          <button id="btnSaveCosts" class="btn">Salvar</button>
        </div>
      </section>
    </div>
  </section>

  <!-- D√çVIDAS -->
  <section class="page" id="page-debts">
    <div class="grid">
      <section class="card full">
        <h2>D√≠vidas</h2>

        <div class="grid2">
          <div class="field">
            <label>D√≠vida total atual</label>
            <input id="debtTotal" type="number" min="0" step="0.01" />
          </div>
          <div class="field">
            <label>Aporte mensal em d√≠vidas</label>
            <input id="debtPay" type="number" min="0" step="0.01" />
          </div>
          <div class="field">
            <label>Meta: ficar sem d√≠vidas at√©</label>
            <input id="goalDebtDate" type="month" />
          </div>
        </div>

        <div class="row">
          <button id="btnSaveDebts" class="btn">Salvar</button>
        </div>
      </section>
    </div>
  </section>

  <!-- RESERVA -->
  <section class="page" id="page-reserve">
    <div class="grid">
      <section class="card full">
        <h2>Reserva</h2>

        <div class="grid2">
          <div class="field">
            <label>Reserva atual</label>
            <input id="reserveTotal" type="number" min="0" step="0.01" />
          </div>
          <div class="field">
            <label>Aporte mensal na reserva</label>
            <input id="reserveAdd" type="number" min="0" step="0.01" />
          </div>
          <div class="field">
            <label>Meta reserva (meses de contas)</label>
            <select id="goalReserveMonths">
              <option value="3">3 meses</option>
              <option value="6" selected>6 meses</option>
              <option value="9">9 meses</option>
              <option value="12">12 meses</option>
            </select>
          </div>
        </div>

        <div class="subbox">
          <h3 class="sub">Carteira sugerida (reserva)</h3>
          <p class="muted">70% Tesouro Selic ‚Ä¢ 20% CDB liquidez di√°ria ‚Ä¢ 10% caixa (conta remunerada)</p>
        </div>

        <div class="row">
          <button id="btnSaveReserve" class="btn">Salvar</button>
        </div>
      </section>
    </div>
  </section>

  <!-- HIST√ìRICO -->
  <section class="page" id="page-history">
    <section class="card full">
      <h2>Hist√≥rico</h2>
      <div class="row">
        <button id="btnCloseMonth" class="btn ok">Fechar m√™s</button>
        <button id="btnClearHistory" class="btn ghost">Limpar hist√≥rico</button>
        <button id="btnExport2" class="btn ghost">Exportar JSON</button>
        <label class="btn ghost file">
          Importar JSON
          <input id="fileImport2" type="file" accept="application/json" />
        </label>
      </div>

      <div class="tableWrap">
        <table>
          <thead>
            <tr>
              <th>M√™s</th><th>Renda</th><th>Fixos</th><th>D√≠vida</th><th>Reserva</th><th>Sobra</th><th>D√≠vida ap√≥s</th><th>Reserva ap√≥s</th>
            </tr>
          </thead>
          <tbody id="historyBody"></tbody>
        </table>
      </div>
    </section>
  </section>

  <!-- CONFIG -->
  <section class="page" id="page-settings">
    <section class="card full">
      <h2>Config</h2>

      <h3 class="sub">PIN (prote√ß√£o local)</h3>
      <div class="grid2">
        <div class="field">
          <label>Novo PIN</label>
          <input id="pinNew" type="password" inputmode="numeric" />
        </div>
        <div class="field">
          <label>Confirmar PIN</label>
          <input id="pinConfirm" type="password" inputmode="numeric" />
        </div>
      </div>

      <div class="row">
        <button id="btnSetPin" class="btn">Salvar PIN</button>
        <button id="btnRemovePin" class="btn danger">Remover PIN</button>
      </div>
    </section>
  </section>
</main>

  <footer class="wrap footer">
    <small>Controle simples ‚Ä¢ GitHub Pages ‚Ä¢ localStorage</small>
  </footer>

  <script src="./app.js"></script>
</body>
</html>
