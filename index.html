<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Controle de Grana</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>

<header class="header">
  <div class="wrap headerInner">
    <div>
      <h1>Controle de Grana</h1>
      <p>Rendas • Gastos • Dívidas • Reserva • Histórico (salva no navegador)</p>
    </div>

    <div class="headerBtns">
      <button type="button" id="btnExport" class="btn ghost">Exportar</button>
      <label class="btn ghost file">
        Importar
        <input id="fileImport" type="file" accept="application/json" />
      </label>
      <button type="button" id="btnReset" class="btn danger">Zerar</button>
    </div>
  </div>
</header>

<main class="wrap">

  <!-- TABS -->
  <nav class="tabs" id="tabs">
    <button type="button" class="tab" data-tab="dash">Dashboard</button>
    <button type="button" class="tab" data-tab="income">Rendas</button>
    <button type="button" class="tab" data-tab="costs">Gastos</button>
    <button type="button" class="tab" data-tab="debts">Dívidas</button>
    <button type="button" class="tab" data-tab="reserve">Reserva</button>
    <button type="button" class="tab" data-tab="history">Histórico</button>
  </nav>

  <!-- DASHBOARD -->
  <section class="page" id="page-dash">
    <div class="grid">
      <section class="card">
        <div class="cardTop">
          <h2>Resumo do mês</h2>
          <div class="row">
            <button type="button" id="btnSave" class="btn">Salvar tudo</button>
            <button type="button" id="btnCloseMonth" class="btn ok">Fechar mês</button>
          </div>
        </div>

        <div class="stats">
          <div class="stat"><span>Renda total</span><strong id="sumIncome">R$ 0,00</strong></div>
          <div class="stat"><span>Gastos fixos</span><strong id="sumFixed">R$ 0,00</strong></div>
          <div class="stat"><span>Aportes (dívida + reserva)</span><strong id="sumAports">R$ 0,00</strong></div>
          <div class="stat"><span>Sobra do mês</span><strong id="sumLeft" class="good">R$ 0,00</strong></div>
        </div>

        <hr />

        <div class="stats">
          <div class="stat"><span>Dívida restante (modo simples)</span><strong id="sumDebtAfter">R$ 0,00</strong></div>
          <div class="stat"><span>Meses p/ quitar (modo simples)</span><strong id="sumMonths">—</strong></div>
          <div class="stat"><span>Reserva após aporte</span><strong id="sumReserveAfter">R$ 0,00</strong></div>
          <div class="stat"><span>Meta reserva (6x fixos)</span><strong id="sumReserveGoal">R$ 0,00</strong></div>
        </div>

        <div class="hint">
          “Modo simples” usa 1 dívida total (campo Dívida Total). Para controle real, use a aba Dívidas (lista + projeção).
        </div>
      </section>

      <section class="card">
        <h2>Metas</h2>

        <div class="grid2">
          <div class="field">
            <label>Meta: ficar sem dívidas até</label>
            <input id="goalDebtDate" type="month" />
          </div>
          <div class="field">
            <label>Meta reserva (meses de contas)</label>
            <select id="goalReserveMonths">
              <option value="3">3</option>
              <option value="6" selected>6</option>
              <option value="9">9</option>
              <option value="12">12</option>
            </select>
          </div>
        </div>

        <div class="stats">
          <div class="stat"><span>Previsão quitação</span><strong id="goalDebtETA">—</strong></div>
          <div class="stat"><span>Status</span><strong id="goalDebtStatus">—</strong></div>
          <div class="stat"><span>Meta reserva (R$)</span><strong id="goalReserveValue">R$ 0,00</strong></div>
          <div class="stat"><span>Tempo pra meta reserva</span><strong id="goalReserveETA">—</strong></div>
        </div>

        <hr />

        <h2>Resumo por diária (manual)</h2>
        <div class="grid2">
          <div class="field">
            <label>Diária (R$)</label>
            <input id="dailyValue" type="number" min="0" step="0.01" placeholder="Ex: 240" />
          </div>
          <div class="field">
            <label>Fixos por dia (R$)</label>
            <input id="dailyFixed" type="number" min="0" step="0.01" placeholder="Ex: 146" />
          </div>
        </div>
        <div class="stats">
          <div class="stat"><span>Sobra diária</span><strong id="dailyLeft">R$ 0,00</strong></div>
          <div class="stat"><span>Sobra mensal (30 dias)</span><strong id="dailyLeftMonth">R$ 0,00</strong></div>
        </div>

        <div class="hint">
          Você pode usar: diária 240 e fixos 146 (com 30 dias).
        </div>
      </section>
    </div>
  </section>

  <!-- RENDAS -->
  <section class="page" id="page-income">
    <section class="card">
      <div class="cardTop">
        <h2>Rendas</h2>
        <button type="button" class="btn" data-save>Salvar</button>
      </div>

      <div class="grid2">
        <div class="field">
          <label>Sua renda do mês (Uber)</label>
          <input id="incomeYou" type="number" min="0" step="0.01" placeholder="Ex: 7200" />
        </div>
        <div class="field">
          <label>Renda da esposa</label>
          <input id="incomeWife" type="number" min="0" step="0.01" placeholder="Ex: 3000" />
        </div>
        <div class="field">
          <label>Extras (por fora)</label>
          <input id="incomeExtra" type="number" min="0" step="0.01" placeholder="Ex: 500" />
        </div>
      </div>

      <div class="hint">Tudo que entra no mês.</div>
    </section>
  </section>

  <!-- GASTOS -->
  <section class="page" id="page-costs">
    <section class="card">
      <div class="cardTop">
        <h2>Gastos</h2>
        <button type="button" class="btn" data-save>Salvar</button>
      </div>

      <div class="grid2">
        <div class="field">
          <label>Contas fixas (total mensal)</label>
          <input id="fixedCosts" type="number" min="0" step="0.01" placeholder="Ex: 4380" />
        </div>
      </div>

      <div class="hint">Depois adicionamos variáveis (gasolina, etc.).</div>
    </section>
  </section>

  <!-- DÍVIDAS (COMPLETO) -->
  <section class="page" id="page-debts">
    <section class="card">
      <div class="cardTop">
        <h2>Dívidas (controle completo)</h2>
        <div class="row">
          <button type="button" id="btnAddDebt" class="btn ok">+ Nova dívida</button>
          <button type="button" id="btnRunProjection" class="btn">Atualizar projeção</button>
        </div>
      </div>

      <div class="grid2">
        <div class="field">
          <label>Aporte mensal total para dívidas (R$)</label>
          <input id="debtBudgetMonthly" type="number" min="0" step="0.01" placeholder="Ex: 2000" />
        </div>

        <div class="field">
          <label>Estratégia de quitação</label>
          <select id="debtStrategy">
            <option value="avalanche">Avalanche (maior juros primeiro)</option>
            <option value="snowball">Snowball (menor saldo primeiro)</option>
          </select>
        </div>
      </div>

      <div class="stats">
        <div class="stat"><span>Total em dívidas (saldo)</span><strong id="debtsTotal">R$ 0,00</strong></div>
        <div class="stat"><span>Pago no total</span><strong id="debtsPaidTotal">R$ 0,00</strong></div>
        <div class="stat"><span>Parcelas mínimas (mês)</span><strong id="debtsMinTotal">R$ 0,00</strong></div>
        <div class="stat"><span>Previsão para zerar</span><strong id="debtsETA">—</strong></div>
      </div>

      <hr />

      <div class="tableWrap">
        <table>
          <thead>
            <tr>
              <th>Dívida</th>
              <th>Saldo</th>
              <th>Juros (a.m.)</th>
              <th>Mínimo/mês</th>
              <th>Venc.</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="debtsBody"></tbody>
        </table>
      </div>

      <div class="hint">
        Juros pode ser 0%. A projeção funciona com ou sem juros.
      </div>
    </section>

    <!-- Modal: Nova/Editar dívida -->
    <div class="modal hidden" id="debtModal">
      <div class="modalCard">
        <div class="modalTop">
          <h3 id="debtModalTitle">Nova dívida</h3>
          <button type="button" class="btn ghost" id="btnCloseDebtModal">Fechar</button>
        </div>

        <div class="grid2">
          <div class="field">
            <label>Nome</label>
            <input id="debtName" type="text" placeholder="Ex: Cartão Nubank, Empréstimo..." />
          </div>
          <div class="field">
            <label>Saldo atual (R$)</label>
            <input id="debtBalance" type="number" min="0" step="0.01" />
          </div>
          <div class="field">
            <label>Juros ao mês (%) (opcional)</label>
            <input id="debtAprMonthly" type="number" min="0" step="0.01" placeholder="Ex: 10" />
          </div>
          <div class="field">
            <label>Parcela mínima/mês (R$) (opcional)</label>
            <input id="debtMinPay" type="number" min="0" step="0.01" placeholder="Ex: 250" />
          </div>
          <div class="field">
            <label>Vencimento (dia do mês) (opcional)</label>
            <input id="debtDueDay" type="number" min="1" max="31" step="1" placeholder="Ex: 10" />
          </div>
        </div>

        <div class="row">
          <button type="button" id="btnSaveDebt" class="btn ok">Salvar dívida</button>
          <button type="button" id="btnDeleteDebt" class="btn danger hidden">Remover</button>
        </div>
      </div>
    </div>

    <!-- Modal: Registrar pagamento -->
    <div class="modal hidden" id="payModal">
      <div class="modalCard">
        <div class="modalTop">
          <h3 id="payModalTitle">Registrar pagamento</h3>
          <button type="button" class="btn ghost" id="btnClosePayModal">Fechar</button>
        </div>

        <div class="grid2">
          <div class="field">
            <label>Valor pago (R$)</label>
            <input id="payAmount" type="number" min="0" step="0.01" />
          </div>
          <div class="field">
            <label>Data</label>
            <input id="payDate" type="date" />
          </div>
        </div>

        <div class="row">
          <button type="button" id="btnConfirmPay" class="btn ok">Confirmar pagamento</button>
        </div>

        <div class="hint">O pagamento reduz o saldo e entra no histórico de pagamentos.</div>
      </div>
    </div>
  </section>

  <!-- RESERVA -->
  <section class="page" id="page-reserve">
    <section class="card">
      <div class="cardTop">
        <h2>Reserva</h2>
        <button type="button" class="btn" data-save>Salvar</button>
      </div>

      <div class="grid2">
        <div class="field">
          <label>Reserva atual</label>
          <input id="reserveTotal" type="number" min="0" step="0.01" placeholder="Ex: 2000" />
        </div>
        <div class="field">
          <label>Aporte mensal na reserva</label>
          <input id="reserveAdd" type="number" min="0" step="0.01" placeholder="Ex: 200" />
        </div>
      </div>

      <div class="subbox">
        <h3 class="sub">Carteira sugerida (Reserva)</h3>
        <p class="muted">70% Tesouro Selic • 20% CDB liquidez diária • 10% conta remunerada</p>
      </div>
    </section>
  </section>

  <!-- HISTÓRICO -->
  <section class="page" id="page-history">
    <section class="card">
      <div class="cardTop">
        <h2>Histórico (fechamento de mês)</h2>
        <div class="row">
          <button type="button" id="btnClearHistory" class="btn ghost">Limpar histórico</button>
        </div>
      </div>

      <div class="tableWrap">
        <table>
          <thead>
            <tr>
              <th>Mês</th>
              <th>Renda</th>
              <th>Fixos</th>
              <th>Dívida</th>
              <th>Reserva</th>
              <th>Sobra</th>
              <th>Dívida após</th>
              <th>Reserva após</th>
            </tr>
          </thead>
          <tbody id="historyBody"></tbody>
        </table>
      </div>

      <div class="hint">Fechar mês no Dashboard salva aqui e atualiza “Dívida total” e “Reserva atual”.</div>
    </section>
  </section>

</main>

<script src="./app.js"></script>
</body>
</html>
